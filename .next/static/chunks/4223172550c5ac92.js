(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94179,e=>{"use strict";var t=e.i(43476),r=e.i(91918),s=e.i(25913),i=e.i(47163);let a=(0,s.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,asChild:l=!1,...n}){let o=l?r.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(a({variant:s}),e),...n})}e.s(["Badge",()=>l])},64752,e=>{"use strict";var t=e.i(43476);function r({block:e,onClick:r,theme:s}){let i=()=>r?.(e);if("text"===e.type){let r=e.style||{},a={...s?.styles||{},fontWeight:r.bold?"bold":"normal",fontStyle:r.italic?"italic":"normal",textDecoration:r.underline?"underline":"none",fontSize:r.size||"inherit",textAlign:r.align,direction:r.direction,color:r.color,background:r.background,padding:r.padding,borderRadius:r.radius,lineHeight:r.lineHeight,...r};return(0,t.jsx)("div",{onClick:i,className:"prose prose-sm max-w-none",style:a,dangerouslySetInnerHTML:{__html:e.html||""}})}if("image"===e.type)return(0,t.jsxs)("figure",{onClick:i,className:"flex flex-col items-center",children:[(0,t.jsx)("img",{src:e.src,alt:e.alt||"",className:"rounded-xl border bg-slate-50"}),e.alt&&(0,t.jsx)("figcaption",{className:"text-[11px] text-slate-500",children:e.alt})]});if("video"===e.type)return(0,t.jsx)("div",{onClick:i,children:(0,t.jsx)("video",{src:e.src,controls:!0,className:"w-full rounded-xl border bg-black"})});if("quiz"===e.type)return(0,t.jsxs)("div",{onClick:i,className:"rounded-xl border bg-slate-50 p-3 space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-semibold",children:e.question}),(e.options||[]).map(r=>(0,t.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-700",children:[(0,t.jsx)("input",{type:"radio",name:e.id,onClick:e=>e.stopPropagation()}),(0,t.jsx)("span",{children:r.label})]},r.id))]});if("interactive"===e.type){let r=e.style||{},s={padding:r.padding||"10px",borderRadius:r.radius||("button"===e.variant?"999px":"12px"),background:r.background||("button"===e.variant?"#0ea5e9":"callout"===e.variant?"#eef2ff":"#f1f5f9"),boxShadow:r.shadow?"0 8px 20px rgba(0,0,0,0.15)":"none",cursor:"pointer"};if("button"===e.variant)return(0,t.jsx)("button",{onClick:i,style:s,className:"text-xs text-white",children:e.label||"Interactive"});if("callout"===e.variant)return(0,t.jsxs)("div",{onClick:i,style:s,children:[e.label&&(0,t.jsx)("p",{className:"font-semibold",children:e.label}),e.bodyHtml?(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:e.bodyHtml},className:"prose prose-xs"}):(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"Empty callout."})]});if("reveal"===e.variant)return(0,t.jsxs)("details",{onClick:e=>{e.stopPropagation(),i()},open:e.initiallyOpen,style:s,children:[(0,t.jsx)("summary",{children:e.label||"Show"}),(0,t.jsx)("div",{className:"mt-2 prose prose-xs",dangerouslySetInnerHTML:{__html:e.bodyHtml||"<em style='color:#999'>Empty reveal</em>"}})]});if("custom"===e.variant)return(0,t.jsx)("div",{onClick:i,style:s,dangerouslySetInnerHTML:{__html:e.customHtml||"<em style='color:#999;font-size:12px'>Empty custom HTML</em>"}})}return(0,t.jsx)("div",{onClick:i,className:"text-[11px] text-slate-400",children:"Unknown block type."})}e.s(["BlockRenderer",()=>r])},57783,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),i=e.i(94179),a=e.i(67881),l=e.i(64752),n=e.i(78876);function o({project:e,className:s}){let{t:o}=(0,n.useLocale)(),[d,c]=(0,r.useState)(e.pages?.[0]?.id??""),p=(0,r.useMemo)(()=>e.pages?.find(e=>e.id===d)??null,[d,e.pages]),u=e.theme?.direction==="rtl";return(0,t.jsxs)("div",{className:s,dir:u?"rtl":void 0,children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:e.pages?.map((e,r)=>{let s=e.title||o("shop.preview.untitledPage")||o("scorm.ai.introduction");return(0,t.jsxs)(a.Button,{size:"sm",variant:e.id===d?"default":"outline",className:"rounded-full",onClick:()=>c(e.id),children:[(0,t.jsx)(i.Badge,{variant:"secondary",className:"mr-2 text-[10px]",children:r+1}),s]},e.id)})}),(0,t.jsx)("div",{className:"rounded-xl border border-border bg-card/70 shadow-sm p-4",children:p&&p.blocks&&p.blocks.length>0?(0,t.jsx)("div",{className:"space-y-4",children:p.blocks.map(r=>(0,t.jsx)("div",{className:"rounded-2xl border bg-background px-4 py-3",children:(0,t.jsx)(l.BlockRenderer,{block:r,theme:e.theme})},r.id))}):(0,t.jsx)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:o("shop.preview.emptyPage")})})]})}function d(){let e=(0,s.useParams)(),{t:l,locale:d}=(0,n.useLocale)(),[c,p]=(0,r.useState)(null),[u,x]=(0,r.useState)(!0),[m,g]=(0,r.useState)(null),h=(0,r.useCallback)(()=>({id:"string"==typeof e.id?e.id:"preview",title:l("shop.preview.placeholderTitle")||l("scorm.ai.untitledProject"),version:"1.0",theme:{direction:"ar"===d?"rtl":"ltr",styles:{}},pages:[{id:"page-1",title:l("shop.preview.samplePage"),blocks:[{id:"intro",type:"text",html:`<p>${l("shop.preview.sampleIntro")}</p>`,style:{size:"18px",lineHeight:"1.6",padding:"12px"}}]}]}),[d,e.id,l]);(0,r.useEffect)(()=>{let t=async()=>{try{x(!0);let t=await fetch(`/api/scorm/package/${e.id}`);if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Failed to load package")}let r=await t.json();p(r.data)}catch(e){g(e instanceof Error?e.message:String(e))}finally{x(!1)}};e?.id&&t()},[e?.id]);let v=(0,r.useMemo)(()=>c?.content||h(),[c?.content,h]),b=v.pages?.length||0,f=v.pages?.reduce((e,t)=>e+(t.blocks?.length||0),0)||0;return(0,t.jsx)("div",{className:"min-h-screen bg-background py-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:l("shop.preview.breadcrumb")}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:c?.title||v.title||l("shop.preview.placeholderTitle")}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:l("shop.preview.meta",{pages:b,blocks:f})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Badge,{variant:"outline",className:"text-[11px]",children:v.theme?.direction==="rtl"?l("shop.preview.languageRtl"):l("shop.preview.languageLtr")}),(0,t.jsx)(a.Button,{size:"sm",variant:"outline",onClick:()=>window.history.back(),children:l("shop.preview.back")})]})]}),u?(0,t.jsx)("div",{className:"rounded-xl border border-dashed border-border p-6 text-center text-muted-foreground",children:l("shop.preview.loading")}):m?(0,t.jsxs)("div",{className:"rounded-xl border border-destructive bg-destructive/10 p-6 text-center text-destructive",children:[l("shop.preview.error"),": ",m]}):(0,t.jsx)(o,{project:v})]})})}e.s(["default",()=>d],57783)}]);