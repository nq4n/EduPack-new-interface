(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var a=e.i(43476),l=e.i(47163);function r({className:e,type:r,...t}){return(0,a.jsx)("input",{type:r,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...t})}e.s(["Input",()=>r])},2153,e=>{"use strict";var a=e.i(43476),l=e.i(71645),r=e.i(18566);let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var s=e.i(84614),i=e.i(46696),n=e.i(94433),d=e.i(67881),o=e.i(23750);let u=(0,e.i(20755).createClient)();async function c(e){let{data:a,error:l}=await u.from("users").select("user_id, email, full_name, preferred_language, avatar_url, created_at").eq("user_id",e).single();return{data:a,error:l}}async function m(e,a){let{error:l}=await u.from("users").update({full_name:a.full_name,preferred_language:a.preferred_language,avatar_url:a.avatar_url??null}).eq("user_id",e);return{error:l}}let f=[{label:"English",value:"en"},{label:"Arabic",value:"ar"}],g=e=>e?.toLowerCase().startsWith("ar")?"ar":"en";function x(){return(0,a.jsx)(p,{})}function p(){let{user:e}=(0,n.useSupabase)(),u=(0,r.useRouter)(),[x,p]=(0,l.useState)({fullName:"",email:"",preferredLanguage:""}),[b,h]=(0,l.useState)(!0),[v,j]=(0,l.useState)(!1),[N,y]=(0,l.useState)(null),w=(0,l.useMemo)(()=>!e,[e]),_=(0,l.useCallback)(async()=>{if(!e)return void h(!1);h(!0),y(null);let{data:a,error:l}=await c(e.id);l?y("Could not load your profile. Please try again."):a&&P(a),h(!1)},[e]);(0,l.useEffect)(()=>{_()},[_]);let P=a=>{p({fullName:a.full_name??"",email:a.email??e?.email??"",preferredLanguage:g(a.preferred_language??"en")})},C=async()=>{if(!e)return void y("You must be logged in to update your profile.");j(!0),y(null);let{error:a}=await m(e.id,{full_name:x.fullName,preferred_language:g(x.preferredLanguage||"en")});(j(!1),a)?y("Failed to save your changes. Please try again."):(i.toast.success("Profile updated"),await _(),u.refresh())};return w?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Profile"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Please sign in to view your profile."})]}):b?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Profile"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(t,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"Syncing your profile with the database..."})]})]}):(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Personal Information"}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Profile Picture"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center",children:(0,a.jsx)(s.User,{className:"h-10 w-10 text-primary"})}),(0,a.jsx)(d.Button,{variant:"outline",size:"sm",disabled:!0,children:"Upload Photo"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Full Name"}),(0,a.jsx)(o.Input,{value:x.fullName,onChange:e=>{p(a=>({...a,fullName:e.target.value}))},disabled:b})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Email"}),(0,a.jsx)(o.Input,{value:x.email,type:"email",disabled:!0})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Preferred Language"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 rounded-lg border border-input bg-background text-sm",value:x.preferredLanguage,onChange:e=>{p(a=>({...a,preferredLanguage:e.target.value}))},disabled:b,children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select a language"}),f.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),N&&(0,a.jsx)("p",{className:"text-sm text-destructive pt-2",children:N}),(0,a.jsx)("div",{className:"pt-6",children:(0,a.jsx)(d.Button,{onClick:C,disabled:b||v,children:v?"Saving...":"Save Changes"})})]})})}e.s(["default",()=>x],2153)}]);