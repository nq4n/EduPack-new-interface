module.exports=[5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},65066,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);let e=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var f=a.i(46842),g=a.i(23292),h=a.i(45404),i=a.i(40695),j=a.i(5522);let k=(0,a.i(69240).createClient)();async function l(a){let{data:b,error:c}=await k.from("users").select("user_id, email, full_name, preferred_language, avatar_url, created_at").eq("user_id",a).single();return{data:b,error:c}}async function m(a,b){let{error:c}=await k.from("users").update({full_name:b.full_name,preferred_language:b.preferred_language,avatar_url:b.avatar_url??null}).eq("user_id",a);return{error:c}}let n=[{label:"English",value:"en"},{label:"Arabic",value:"ar"}],o=a=>a?.toLowerCase().startsWith("ar")?"ar":"en";function p(){return(0,b.jsx)(q,{})}function q(){let{user:a}=(0,h.useSupabase)(),k=(0,d.useRouter)(),[p,q]=(0,c.useState)({fullName:"",email:"",preferredLanguage:""}),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),x=(0,c.useMemo)(()=>!a,[a]),y=(0,c.useCallback)(async()=>{if(!a)return void s(!1);s(!0),w(null);let{data:b,error:c}=await l(a.id);c?w("Could not load your profile. Please try again."):b&&z(b),s(!1)},[a]);(0,c.useEffect)(()=>{y()},[y]);let z=b=>{q({fullName:b.full_name??"",email:b.email??a?.email??"",preferredLanguage:o(b.preferred_language??"en")})},A=async()=>{if(!a)return void w("You must be logged in to update your profile.");u(!0),w(null);let{error:b}=await m(a.id,{full_name:p.fullName,preferred_language:o(p.preferredLanguage||"en")});(u(!1),b)?w("Failed to save your changes. Please try again."):(g.toast.success("Profile updated"),await y(),k.refresh())};return x?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Profile"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Please sign in to view your profile."})]}):r?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Profile"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(e,{className:"h-4 w-4 animate-spin"}),(0,b.jsx)("span",{children:"Syncing your profile with the database..."})]})]}):(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Personal Information"}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Profile Picture"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center",children:(0,b.jsx)(f.User,{className:"h-10 w-10 text-primary"})}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",disabled:!0,children:"Upload Photo"})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Full Name"}),(0,b.jsx)(j.Input,{value:p.fullName,onChange:a=>{q(b=>({...b,fullName:a.target.value}))},disabled:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Email"}),(0,b.jsx)(j.Input,{value:p.email,type:"email",disabled:!0})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Preferred Language"}),(0,b.jsxs)("select",{className:"w-full px-3 py-2 rounded-lg border border-input bg-background text-sm",value:p.preferredLanguage,onChange:a=>{q(b=>({...b,preferredLanguage:a.target.value}))},disabled:r,children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"Select a language"}),n.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))]})]})]}),v&&(0,b.jsx)("p",{className:"text-sm text-destructive pt-2",children:v}),(0,b.jsx)("div",{className:"pt-6",children:(0,b.jsx)(i.Button,{onClick:A,disabled:r||t,children:t?"Saving...":"Save Changes"})})]})})}a.s(["default",()=>p],65066)}];

//# sourceMappingURL=_9919b94b._.js.map