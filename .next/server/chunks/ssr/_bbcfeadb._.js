module.exports=[54161,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},15183,a=>{"use strict";var b=a.i(87924);function c({block:a,onClick:c,theme:d}){let e=()=>c?.(a);if("text"===a.type){let c=a.style||{},f={...d?.styles||{},fontWeight:c.bold?"bold":"normal",fontStyle:c.italic?"italic":"normal",textDecoration:c.underline?"underline":"none",fontSize:c.size||"inherit",textAlign:c.align,direction:c.direction,color:c.color,background:c.background,padding:c.padding,borderRadius:c.radius,lineHeight:c.lineHeight,...c};return(0,b.jsx)("div",{onClick:e,className:"prose prose-sm max-w-none",style:f,dangerouslySetInnerHTML:{__html:a.html||""}})}if("image"===a.type)return(0,b.jsxs)("figure",{onClick:e,className:"flex flex-col items-center",children:[(0,b.jsx)("img",{src:a.src,alt:a.alt||"",className:"rounded-xl border bg-slate-50"}),a.alt&&(0,b.jsx)("figcaption",{className:"text-[11px] text-slate-500",children:a.alt})]});if("video"===a.type)return(0,b.jsx)("div",{onClick:e,children:(0,b.jsx)("video",{src:a.src,controls:!0,className:"w-full rounded-xl border bg-black"})});if("quiz"===a.type)return(0,b.jsxs)("div",{onClick:e,className:"rounded-xl border bg-slate-50 p-3 space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:a.question}),(a.options||[]).map(c=>(0,b.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-700",children:[(0,b.jsx)("input",{type:"radio",name:a.id,onClick:a=>a.stopPropagation()}),(0,b.jsx)("span",{children:c.label})]},c.id))]});if("interactive"===a.type){let c=a.style||{},d={padding:c.padding||"10px",borderRadius:c.radius||("button"===a.variant?"999px":"12px"),background:c.background||("button"===a.variant?"#0ea5e9":"callout"===a.variant?"#eef2ff":"#f1f5f9"),boxShadow:c.shadow?"0 8px 20px rgba(0,0,0,0.15)":"none",cursor:"pointer"};if("button"===a.variant)return(0,b.jsx)("button",{onClick:e,style:d,className:"text-xs text-white",children:a.label||"Interactive"});if("callout"===a.variant)return(0,b.jsxs)("div",{onClick:e,style:d,children:[a.label&&(0,b.jsx)("p",{className:"font-semibold",children:a.label}),a.bodyHtml?(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:a.bodyHtml},className:"prose prose-xs"}):(0,b.jsx)("p",{className:"text-[11px] text-slate-500",children:"Empty callout."})]});if("reveal"===a.variant)return(0,b.jsxs)("details",{onClick:a=>{a.stopPropagation(),e()},open:a.initiallyOpen,style:d,children:[(0,b.jsx)("summary",{children:a.label||"Show"}),(0,b.jsx)("div",{className:"mt-2 prose prose-xs",dangerouslySetInnerHTML:{__html:a.bodyHtml||"<em style='color:#999'>Empty reveal</em>"}})]});if("custom"===a.variant)return(0,b.jsx)("div",{onClick:e,style:d,dangerouslySetInnerHTML:{__html:a.customHtml||"<em style='color:#999;font-size:12px'>Empty custom HTML</em>"}})}return(0,b.jsx)("div",{onClick:e,className:"text-[11px] text-slate-400",children:"Unknown block type."})}a.s(["BlockRenderer",()=>c])},67047,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(54161),f=a.i(40695),g=a.i(15183),h=a.i(94508);function i({project:a,className:d}){let{t:i}=(0,h.useLocale)(),[j,k]=(0,c.useState)(a.pages?.[0]?.id??""),l=(0,c.useMemo)(()=>a.pages?.find(a=>a.id===j)??null,[j,a.pages]),m=a.theme?.direction==="rtl";return(0,b.jsxs)("div",{className:d,dir:m?"rtl":void 0,children:[(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:a.pages?.map((a,c)=>{let d=a.title||i("shop.preview.untitledPage")||i("scorm.ai.introduction");return(0,b.jsxs)(f.Button,{size:"sm",variant:a.id===j?"default":"outline",className:"rounded-full",onClick:()=>k(a.id),children:[(0,b.jsx)(e.Badge,{variant:"secondary",className:"mr-2 text-[10px]",children:c+1}),d]},a.id)})}),(0,b.jsx)("div",{className:"rounded-xl border border-border bg-card/70 shadow-sm p-4",children:l&&l.blocks&&l.blocks.length>0?(0,b.jsx)("div",{className:"space-y-4",children:l.blocks.map(c=>(0,b.jsx)("div",{className:"rounded-2xl border bg-background px-4 py-3",children:(0,b.jsx)(g.BlockRenderer,{block:c,theme:a.theme})},c.id))}):(0,b.jsx)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:i("shop.preview.emptyPage")})})]})}function j(){let a=(0,d.useParams)(),{t:g,locale:j}=(0,h.useLocale)(),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(null),q=(0,c.useCallback)(()=>({id:"string"==typeof a.id?a.id:"preview",title:g("shop.preview.placeholderTitle")||g("scorm.ai.untitledProject"),version:"1.0",theme:{direction:"ar"===j?"rtl":"ltr",styles:{}},pages:[{id:"page-1",title:g("shop.preview.samplePage"),blocks:[{id:"intro",type:"text",html:`<p>${g("shop.preview.sampleIntro")}</p>`,style:{size:"18px",lineHeight:"1.6",padding:"12px"}}]}]}),[j,a.id,g]);(0,c.useEffect)(()=>{let b=async()=>{try{n(!0);let b=await fetch(`/api/scorm/package/${a.id}`);if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.error||"Failed to load package")}let c=await b.json();l(c.data)}catch(a){p(a instanceof Error?a.message:String(a))}finally{n(!1)}};a?.id&&b()},[a?.id]);let r=(0,c.useMemo)(()=>k?.content||q(),[k?.content,q]),s=r.pages?.length||0,t=r.pages?.reduce((a,b)=>a+(b.blocks?.length||0),0)||0;return(0,b.jsx)("div",{className:"min-h-screen bg-background py-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:g("shop.preview.breadcrumb")}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:k?.title||r.title||g("shop.preview.placeholderTitle")}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:g("shop.preview.meta",{pages:s,blocks:t})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Badge,{variant:"outline",className:"text-[11px]",children:r.theme?.direction==="rtl"?g("shop.preview.languageRtl"):g("shop.preview.languageLtr")}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>window.history.back(),children:g("shop.preview.back")})]})]}),m?(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-border p-6 text-center text-muted-foreground",children:g("shop.preview.loading")}):o?(0,b.jsxs)("div",{className:"rounded-xl border border-destructive bg-destructive/10 p-6 text-center text-destructive",children:[g("shop.preview.error"),": ",o]}):(0,b.jsx)(i,{project:r})]})})}a.s(["default",()=>j],67047)}];

//# sourceMappingURL=_bbcfeadb._.js.map