module.exports=[63787,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(5522),f=a.i(54161),g=a.i(94508),h=a.i(67129),i=a.i(70106);let j=(0,i.default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),k=(0,i.default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function l({block:a}){switch(a.type){case"text":return(0,b.jsx)(m,{block:a});case"image":return(0,b.jsx)(n,{block:a});case"video":return(0,b.jsx)(o,{block:a});case"quiz":return(0,b.jsx)(p,{block:a});case"interactive":return(0,b.jsx)(q,{block:a});default:return(0,b.jsx)("p",{children:"Unsupported block type"})}}function m({block:a}){return(0,b.jsx)("div",{className:"prose prose-lg max-w-none dark:prose-invert",dangerouslySetInnerHTML:{__html:a.html}})}function n({block:a}){return(0,b.jsxs)("figure",{className:"my-4",children:[(0,b.jsx)("img",{src:a.src,alt:a.alt||"",className:"max-w-full h-auto rounded-lg shadow-md border border-border"}),a.alt&&(0,b.jsx)("figcaption",{className:"text-center text-sm text-muted-foreground mt-2",children:a.alt})]})}function o({block:a}){return(0,b.jsx)("video",{src:a.src,controls:!0,className:"max-w-full rounded-lg shadow-md border border-border w-full"})}function p({block:a}){let[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!1),i=g?a.options.find(a=>a.id===e):null,l=i?.correct;return(0,b.jsxs)("div",{className:"p-4 sm:p-6 border rounded-xl bg-card shadow-sm transition-all my-4",children:[(0,b.jsx)("p",{className:"font-semibold mb-4 text-foreground text-base sm:text-lg",children:a.question}),(0,b.jsx)("div",{className:"space-y-3",children:a.options.map(c=>(0,b.jsxs)("label",{htmlFor:c.id,className:`flex items-center p-3 border-2 rounded-lg transition-all duration-200 ${!g?"border-border bg-card hover:bg-muted/50":c.correct?"border-green-500 bg-green-50/50 dark:bg-green-900/30 text-green-900 dark:text-green-200":c.id===e&&!c.correct?"border-red-500 bg-red-50/50 dark:bg-red-900/30 text-red-900 dark:text-red-200":"border-border bg-card"} ${g?"cursor-default":"cursor-pointer"}`,children:[(0,b.jsx)("input",{type:"radio",name:a.id,id:c.id,className:"h-4 w-4 text-primary focus:ring-primary border-muted-foreground",onChange:a=>f(a.target.id),checked:e===c.id,disabled:g}),(0,b.jsx)("span",{className:"flex-1 text-sm sm:text-base text-foreground ml-3",children:c.label}),g?c.correct?(0,b.jsx)(j,{className:"h-5 w-5 text-green-600"}):c.id!==e||c.correct?(0,b.jsx)("div",{className:"h-5 w-5"}):(0,b.jsx)(k,{className:"h-5 w-5 text-red-600"}):(0,b.jsx)("div",{className:"h-5 w-5"})]},c.id))}),(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-between min-h-[40px]",children:[g?(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{className:`flex items-center font-semibold text-base ${l?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[l?(0,b.jsx)(j,{className:"mr-2 h-5 w-5"}):(0,b.jsx)(k,{className:"mr-2 h-5 w-5"}),(0,b.jsx)("span",{children:l?"Correct!":"Incorrect"})]}),!l&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1 pl-7",children:"The correct answer is highlighted in green."})]}):(0,b.jsx)(d.Button,{onClick:()=>{e&&h(!0)},disabled:!e,children:"Check Answer"}),g&&(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>{f(null),h(!1)},children:"Try Again"})]})]})}function q({block:a}){return(0,b.jsxs)("div",{className:"p-4 border rounded-lg bg-blue-50 my-4 dark:bg-blue-900/20 dark:border-blue-700",children:[(0,b.jsx)("p",{className:"font-semibold mb-2 text-blue-800 dark:text-blue-200",children:"Interactive Element"}),(0,b.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:a.description||"Interact with the content below."}),(0,b.jsx)("div",{className:"mt-2 p-4 bg-white dark:bg-black/20 border rounded-md",children:(0,b.jsx)("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(a.config,null,2)})})]})}var r=a.i(14548),s=a.i(77156),t=a.i(84505),u=a.i(34148),v=a.i(79165),w=a.i(64791),x=a.i(93314),y=a.i(40039),z=a.i(73320),A=a.i(45222);let B={id:`proj-${Date.now()}`,title:"Untitled Project",language:"en",version:"1.0",pages:[{id:"page-1",title:"Introduction",blocks:[]}]};function C(){let{locale:a}=(0,g.useLocale)(),[i,j]=function(a,b){let[d,e]=(0,c.useState)(()=>{try{return b}catch(a){return console.log(a),b}});return(0,c.useEffect)(()=>{},[a]),[d,a=>{try{let b=a instanceof Function?a(d):a;e(b)}catch(a){console.log(a)}}]}("scorm-project",B),[k,m]=(0,c.useState)(i.pages[0]),[n,o]=(0,c.useState)("draft"),[p,q]=(0,c.useState)(""),[C,E]=(0,c.useState)([{id:1,role:"assistant",content:(0,h.t)(a,"scorm.ai.welcome")},{id:2,role:"system",content:'You are a SCORM authoring assistant. Your responses should be in the form of JSON that conforms to the EditorBlock types. For example, to create a text block, you would respond with: {"type":"text","html":"<p>Hello world</p>"}. To create a quiz, you would respond with: {"type":"quiz","question":"What is 2+2?","options":[{"id":"1","label":"3","correct":false},{"id":"2","label":"4","correct":true}]}'}]);(0,c.useEffect)(()=>{let a=i.pages.find(a=>a.id===k.id);a&&m(a)},[i,k.id]);let F=async a=>{if(a.preventDefault(),!p.trim())return;let b=[...C,{id:Date.now(),role:"user",content:p.trim()}];E(b),q("");try{let a=await fetch("/api/scorm/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:b.map(({id:a,...b})=>b)})});if(!a.ok)throw Error("API error");let c=await a.json();try{let a=JSON.parse(c.content);a.id=`block-${Date.now()}`,j(b=>{let c=b.pages.map(b=>b.id===k.id?{...b,blocks:[...b.blocks,a]}:b);return{...b,pages:c}}),E(b=>[...b,{id:Date.now(),role:"assistant",content:`Added a new ${a.type} block.`}])}catch(a){E(a=>[...a,{id:Date.now(),role:"assistant",content:c.content}])}}catch(a){console.error("Failed to get AI response:",a),E(a=>[...a,{id:Date.now(),role:"assistant",content:"Sorry, I had trouble connecting to the AI. Please check your setup and try again."}])}},G=async()=>{try{let a=await fetch("/api/scorm/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!a.ok)throw Error("Export failed");let b=await a.blob(),c=window.URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`${i.title||"scorm-package"}.zip`,document.body.appendChild(d),d.click(),d.remove(),window.URL.revokeObjectURL(c)}catch(a){console.error("Failed to export project:",a)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)("header",{className:"sticky top-16 z-40 bg-card border-b border-border",children:(0,b.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-3 flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,b.jsx)(e.Input,{value:i.title,onChange:a=>j({...i,title:a.target.value}),className:"max-w-xs"}),(0,b.jsx)(f.Badge,{variant:"draft"===n?"secondary":"default",children:"draft"===n?(0,h.t)(a,"scorm.topbar.status.draft"):(0,h.t)(a,"scorm.topbar.status.published")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(s.Eye,{className:"mr-2 h-4 w-4"}),(0,h.t)(a,"scorm.topbar.preview")]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{console.log("Project saved!",i)},children:[(0,b.jsx)(r.Save,{className:"mr-2 h-4 w-4"}),(0,h.t)(a,"scorm.topbar.save")]}),(0,b.jsxs)(d.Button,{size:"sm",onClick:G,children:[(0,b.jsx)(t.Download,{className:"mr-2 h-4 w-4"}),(0,h.t)(a,"scorm.topbar.export")]})]})]})}),(0,b.jsxs)("main",{className:"h-[calc(100vh-4rem-4rem)] flex flex-col gap-3 px-2 sm:px-4 pb-3 pt-2",children:[(0,b.jsxs)("section",{className:"bg-card border border-border rounded-xl p-3 sm:p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold truncate",children:(0,h.t)(a,"scorm.preview.title")}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.t)(a,"scorm.preview.desc")})]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(s.Eye,{className:"mr-2 h-4 w-4"}),(0,h.t)(a,"scorm.preview.open")]})]}),(0,b.jsx)("div",{className:"h-40 sm:h-52 lg:h-60 rounded-lg border border-dashed border-accent/60 bg-accent/30 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:(0,h.t)(a,"scorm.preview.player")})})]}),(0,b.jsx)("section",{className:"flex-1 bg-gradient-to-br from-primary/5 via-primary/10 to-accent/20 border border-primary/20 rounded-2xl p-2 sm:p-3",children:(0,b.jsxs)("div",{className:"h-full bg-card/80 backdrop-blur rounded-xl border border-border/70 flex flex-col",children:[(0,b.jsxs)("div",{className:"border-b border-border/60 p-3 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-primary/10",children:(0,b.jsx)(A.MessageCircle,{className:"h-4 w-4 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold",children:(0,h.t)(a,"scorm.ai.title")}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.t)(a,"scorm.ai.desc")})]})]}),(0,b.jsx)("div",{className:"h-32 sm:h-40 overflow-y-auto rounded-lg border border-border/60 bg-background/70 p-2 space-y-2 text-xs sm:text-sm",children:C.map(a=>(0,b.jsx)("div",{className:`flex ${"user"===a.role?"justify-end":"justify-start"}`,children:(0,b.jsx)("div",{className:`max-w-[80%] px-3 py-2 rounded-2xl ${"user"===a.role?"bg-primary text-primary-foreground rounded-br-sm":"system"===a.role?"hidden":"bg-accent/40 text-foreground rounded-bl-sm"}`,children:a.content})},a.id))}),(0,b.jsxs)("form",{onSubmit:F,className:"flex gap-2 pt-1",children:[(0,b.jsx)(e.Input,{value:p,onChange:a=>q(a.target.value),placeholder:(0,h.t)(a,"scorm.ai.placeholder"),className:"text-xs sm:text-sm"}),(0,b.jsx)(d.Button,{type:"submit",size:"sm",children:(0,h.t)(a,"scorm.ai.send")})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full overflow-auto px-4 py-4",children:(0,b.jsx)("div",{className:"max-w-3xl mx-auto space-y-4",children:k.blocks.length>0?k.blocks.map(a=>(0,b.jsx)(l,{block:a},a.id)):(0,b.jsxs)("div",{className:"text-center space-y-3 py-12",children:[(0,b.jsx)("h2",{className:"text-base sm:text-lg font-semibold",children:(0,h.t)(a,"scorm.canvas.title")}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:(0,h.t)(a,"scorm.canvas.desc")}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",type:"button",children:[(0,b.jsx)(y.MousePointerClick,{className:"mr-2 h-4 w-4"}),(0,h.t)(a,"scorm.canvas.start")]})]})})})}),(0,b.jsxs)("div",{className:"border-t border-border/60 bg-card/90 px-3 py-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-[11px] font-semibold tracking-wide text-muted-foreground uppercase",children:(0,h.t)(a,"scorm.tools.title")}),(0,b.jsx)("span",{className:"hidden sm:inline text-[11px] text-muted-foreground",children:(0,h.t)(a,"scorm.tools.desc")})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[(0,b.jsx)(D,{icon:(0,b.jsx)(u.Type,{className:"h-4 w-4"}),label:(0,h.t)(a,"scorm.tools.text")}),(0,b.jsx)(D,{icon:(0,b.jsx)(v.ImageIcon,{className:"h-4 w-4"}),label:(0,h.t)(a,"scorm.tools.image")}),(0,b.jsx)(D,{icon:(0,b.jsx)(w.Video,{className:"h-4 w-4"}),label:(0,h.t)(a,"scorm.tools.video")}),(0,b.jsx)(D,{icon:(0,b.jsx)(x.FileQuestion,{className:"h-4 w-4"}),label:(0,h.t)(a,"scorm.tools.quiz")}),(0,b.jsx)(D,{icon:(0,b.jsx)(y.MousePointerClick,{className:"h-4 w-4"}),label:(0,h.t)(a,"scorm.tools.interactive")}),(0,b.jsx)(D,{icon:(0,b.jsx)(z.Upload,{className:"h-4 w-4"}),label:(0,h.t)(a,"scorm.tools.upload")})]})]})]})})]})]})}function D({icon:a,label:c}){return(0,b.jsxs)("button",{type:"button",className:"flex items-center justify-center gap-1 rounded-lg border border-accent/50 bg-accent/20 hover:bg-accent/30 px-2 py-2 text-[11px] sm:text-xs font-medium text-foreground transition-colors",children:[(0,b.jsx)("span",{className:"text-primary",children:a}),(0,b.jsx)("span",{children:c})]})}a.s(["default",()=>C],63787)}];

//# sourceMappingURL=app_%28editor%29_scorm-ai_page_tsx_dd30ef00._.js.map