{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows%2011/Desktop/%D9%85%D8%B4%D8%B1%D9%88%D8%B9%20%D8%A7%D9%84%D8%AA%D8%AE%D8%B1%D8%AC/EduPack-new-interface/lib/supabase/server.ts"],"sourcesContent":["// lib/supabase/server.ts\r\nimport { createServerClient, type CookieOptions } from \"@supabase/ssr\";\r\nimport { cookies } from \"next/headers\";\r\n\r\n// ⚠️ IMPORTANT: this is async now\r\nexport async function createClient() {\r\n  const cookieStore = await cookies();\r\n\r\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\n  if (!supabaseUrl || !supabaseAnonKey) {\r\n    throw new Error(\r\n      \"Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY\"\r\n    );\r\n  }\r\n\r\n  return createServerClient(supabaseUrl, supabaseAnonKey, {\r\n    cookies: {\r\n      // Next.js + @supabase/ssr expect getAll/setAll, NOT get/set/remove\r\n      getAll() {\r\n        return cookieStore.getAll();\r\n      },\r\n      setAll(cookiesToSet: { name: string; value: string; options: CookieOptions }[]) {\r\n        try {\r\n          cookiesToSet.forEach(({ name, value, options }) => {\r\n            cookieStore.set(name, value, options);\r\n          });\r\n        } catch {\r\n          // Called from a Server Component – it's okay to ignore writes here\r\n          // if you also have middleware handling session refresh.\r\n        }\r\n      },\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AACzB;AAAA;AACA;;;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,MAAM;IACN,MAAM;IAEN;;IAMA,OAAO,IAAA,+LAAkB,EAAC,aAAa,iBAAiB;QACtD,SAAS;YACP,mEAAmE;YACnE;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAuE;gBAC5E,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;wBAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;oBAC/B;gBACF,EAAE,OAAM;gBACN,mEAAmE;gBACnE,wDAAwD;gBAC1D;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows%2011/Desktop/%D9%85%D8%B4%D8%B1%D9%88%D8%B9%20%D8%A7%D9%84%D8%AA%D8%AE%D8%B1%D8%AC/EduPack-new-interface/components/ui/button.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Button = registerClientReference(\n    function() { throw new Error(\"Attempted to call Button() from the server but Button is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/button.tsx <module evaluation>\",\n    \"Button\",\n);\nexport const buttonVariants = registerClientReference(\n    function() { throw new Error(\"Attempted to call buttonVariants() from the server but buttonVariants is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/button.tsx <module evaluation>\",\n    \"buttonVariants\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,0DACA;AAEG,MAAM,iBAAiB,IAAA,wQAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,0DACA","ignoreList":[0]}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows%2011/Desktop/%D9%85%D8%B4%D8%B1%D9%88%D8%B9%20%D8%A7%D9%84%D8%AA%D8%AE%D8%B1%D8%AC/EduPack-new-interface/components/ui/button.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Button = registerClientReference(\n    function() { throw new Error(\"Attempted to call Button() from the server but Button is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/button.tsx\",\n    \"Button\",\n);\nexport const buttonVariants = registerClientReference(\n    function() { throw new Error(\"Attempted to call buttonVariants() from the server but buttonVariants is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/button.tsx\",\n    \"buttonVariants\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,sCACA;AAEG,MAAM,iBAAiB,IAAA,wQAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,sCACA","ignoreList":[0]}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows%2011/Desktop/%D9%85%D8%B4%D8%B1%D9%88%D8%B9%20%D8%A7%D9%84%D8%AA%D8%AE%D8%B1%D8%AC/EduPack-new-interface/app/profile/packages/page.tsx"],"sourcesContent":["// app/profile/packages/page.tsx\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { Package, Download, Eye } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { redirect } from \"next/navigation\";\r\n\r\ntype PackageItem = {\r\n  package_id: string;\r\n  title: string;\r\n  description: string | null;\r\n  created_at: string;\r\n  storage_path: string | null;\r\n};\r\n\r\nexport default async function OwnedPackagesPage() {\r\n  // ---------------------------\r\n  // 1) AUTHENTICATE USER (server)\r\n  // ---------------------------\r\n  const supabase = await createClient();\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser();\r\n\r\n  if (!user) redirect(\"/login\");\r\n\r\n  // ---------------------------\r\n  // 2) FETCH OWNED PACKAGES\r\n  // ---------------------------\r\n  const { data: packages, error } = await supabase\r\n    .from(\"packages\")\r\n    .select(\"package_id, title, description, created_at, storage_path\")\r\n    .eq(\"created_by_user_id\", user.id)\r\n    .order(\"created_at\", { ascending: false });\r\n\r\n  if (error) {\r\n    console.error(\"Error loading packages:\", error);\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h2 className=\"text-2xl font-bold text-foreground\">Owned Packages</h2>\r\n\r\n      {packages && packages.length > 0 ? (\r\n        <div className=\"space-y-4\">\r\n          {packages.map((pkg: PackageItem) => (\r\n            <div\r\n              key={pkg.package_id}\r\n              className=\"flex items-center justify-between p-4 border border-border rounded-lg\"\r\n            >\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"font-semibold text-foreground mb-2\">\r\n                  {pkg.title}\r\n                </h3>\r\n\r\n                {pkg.description && (\r\n                  <p className=\"text-sm text-muted-foreground mb-2\">\r\n                    {pkg.description}\r\n                  </p>\r\n                )}\r\n\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Created: {new Date(pkg.created_at).toLocaleDateString()}\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex gap-2\">\r\n                <form action={`/api/scorm/download`} method=\"POST\">\r\n                  <input type=\"hidden\" name=\"path\" value={pkg.storage_path ?? \"\"} />\r\n                  <Button variant=\"outline\" size=\"sm\">\r\n                    <Download className=\"mr-2 h-4 w-4\" />\r\n                    Download\r\n                  </Button>\r\n                </form>\r\n\r\n                <Button variant=\"outline\" size=\"sm\">\r\n                  <Eye className=\"mr-2 h-4 w-4\" />\r\n                  View\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-12\">\r\n          <Package className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">\r\n            No packages yet\r\n          </h3>\r\n          <p className=\"text-muted-foreground mb-6\">\r\n            You haven&apos;t created any packages yet. Start building your first SCORM package.\r\n          </p>\r\n          <Button href=\"/editor\">Create New Package</Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;AAChC;AACA;AAAA;AAAA;AACA;AACA;AAAA;;;;;;AAUe,eAAe;IAC5B,8BAA8B;IAC9B,gCAAgC;IAChC,8BAA8B;IAC9B,MAAM,WAAW,MAAM,IAAA,yIAAY;IACnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM,IAAA,iMAAQ,EAAC;IAEpB,8BAA8B;IAC9B,0BAA0B;IAC1B,8BAA8B;IAC9B,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,SACrC,IAAI,CAAC,YACL,MAAM,CAAC,4DACP,EAAE,CAAC,sBAAsB,KAAK,EAAE,EAChC,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM;IAE1C,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,2BAA2B;IAC3C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAqC;;;;;;YAElD,YAAY,SAAS,MAAM,GAAG,kBAC7B,8OAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC,oBACb,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDACX,IAAI,KAAK;;;;;;oCAGX,IAAI,WAAW,kBACd,8OAAC;wCAAE,WAAU;kDACV,IAAI,WAAW;;;;;;kDAIpB,8OAAC;wCAAE,WAAU;;4CAAgC;4CACjC,IAAI,KAAK,IAAI,UAAU,EAAE,kBAAkB;;;;;;;;;;;;;0CAIzD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,QAAQ,CAAC,mBAAmB,CAAC;wCAAE,QAAO;;0DAC1C,8OAAC;gDAAM,MAAK;gDAAS,MAAK;gDAAO,OAAO,IAAI,YAAY,IAAI;;;;;;0DAC5D,8OAAC,qIAAM;gDAAC,SAAQ;gDAAU,MAAK;;kEAC7B,8OAAC,sNAAQ;wDAAC,WAAU;;;;;;oDAAiB;;;;;;;;;;;;;kDAKzC,8OAAC,qIAAM;wCAAC,SAAQ;wCAAU,MAAK;;0DAC7B,8OAAC,uMAAG;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;;;;;;;;uBA7B/B,IAAI,UAAU;;;;;;;;;qCAqCzB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,mNAAO;wBAAC,WAAU;;;;;;kCACnB,8OAAC;wBAAG,WAAU;kCAA6C;;;;;;kCAG3D,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;kCAG1C,8OAAC,qIAAM;wBAAC,MAAK;kCAAU;;;;;;;;;;;;;;;;;;AAKjC"}}]
}