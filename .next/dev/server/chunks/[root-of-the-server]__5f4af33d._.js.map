{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/user/EduPack-new-interface/app/api/scorm/save/route.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\nimport { NextResponse } from 'next/server'\n\nexport async function POST(request: Request) {\n  const cookieStore = cookies()\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name: string) {\n          return cookieStore.get(name)?.value\n        },\n        set(name: string, value: string, options: any) {\n          cookieStore.set({ name, value, ...options })\n        },\n        remove(name: string, options: any) {\n          cookieStore.delete({ name, ...options })\n        },\n      },\n    }\n  )\n\n  const { data: { user } } = await supabase.auth.getUser()\n\n  if (!user) {\n    return new NextResponse(\n      JSON.stringify({ error: 'You must be logged in to save a project.' }),\n      { status: 401 }\n    )\n  }\n\n  // Now that the user is authenticated, we can safely get the request body.\n  const project = await request.json()\n\n  if (!project || !project.id) {\n    return new NextResponse(\n      JSON.stringify({ error: 'Invalid project data.' }),\n      { status: 400 }\n    )\n  }\n\n  const { data, error } = await supabase\n    .from('packages')\n    .upsert({\n      id: project.id,\n      user_id: user.id,\n      content: project,\n      title: project.title,\n      updated_at: new Date().toISOString(),\n    })\n    .select()\n    .single()\n\n  if (error) {\n    console.error('Error saving project to Supabase:', error.message)\n    return new NextResponse(\n      JSON.stringify({ error: 'Failed to save project.', details: error.message }),\n      { status: 500 }\n    )\n  }\n\n  return NextResponse.json({ message: 'Project saved successfully', data })\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,cAAc,IAAA,4IAAO;IAE3B,MAAM,WAAW,IAAA,iMAAkB,sUAGjC;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAY;gBAC3C,YAAY,GAAG,CAAC;oBAAE;oBAAM;oBAAO,GAAG,OAAO;gBAAC;YAC5C;YACA,QAAO,IAAY,EAAE,OAAY;gBAC/B,YAAY,MAAM,CAAC;oBAAE;oBAAM,GAAG,OAAO;gBAAC;YACxC;QACF;IACF;IAGF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAEtD,IAAI,CAAC,MAAM;QACT,OAAO,IAAI,gJAAY,CACrB,KAAK,SAAS,CAAC;YAAE,OAAO;QAA2C,IACnE;YAAE,QAAQ;QAAI;IAElB;IAEA,0EAA0E;IAC1E,MAAM,UAAU,MAAM,QAAQ,IAAI;IAElC,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,EAAE;QAC3B,OAAO,IAAI,gJAAY,CACrB,KAAK,SAAS,CAAC;YAAE,OAAO;QAAwB,IAChD;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC;QACN,IAAI,QAAQ,EAAE;QACd,SAAS,KAAK,EAAE;QAChB,SAAS;QACT,OAAO,QAAQ,KAAK;QACpB,YAAY,IAAI,OAAO,WAAW;IACpC,GACC,MAAM,GACN,MAAM;IAET,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,qCAAqC,MAAM,OAAO;QAChE,OAAO,IAAI,gJAAY,CACrB,KAAK,SAAS,CAAC;YAAE,OAAO;YAA2B,SAAS,MAAM,OAAO;QAAC,IAC1E;YAAE,QAAQ;QAAI;IAElB;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,SAAS;QAA8B;IAAK;AACzE"}}]
}